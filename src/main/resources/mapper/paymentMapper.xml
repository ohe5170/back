<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.app.haetssal_jangteo.mapper.PaymentMapper">
    <select id="selectCompleteItemsByUserId">
        select p.id, user_id, item_id, payment_state, item_name,
               item_content, item_price, store_name, market_name
        from tbl_payment p
        join tbl_item i
        on p.item_id = i.id
        join tbl_store s
        on i.item_store_id = s.id
        join tbl_market m
        on s.store_market_id = m.id
        where p.user_id = #{userId} and p.payment_state = 'complete'
    </select>

<!--    <select id="findPendingsByUserId">-->
<!--        -->
<!--    </select>-->
</mapper>